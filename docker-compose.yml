version: "3.9"

services:
  vlm-demo:
    build: .
    image: vlm-demo:latest

    ports:
      - "${VLM_PORT:-8888}:${VLM_PORT:-8888}"

    environment:
      VLM_MODEL_SIZE: "${VLM_MODEL_SIZE:-500M}"   
      VLM_DEVICE: "${VLM_DEVICE:-auto}"           
      VLM_PORT: "${VLM_PORT:-8888}"

      HF_HOME: /data/hf-cache
      HUGGINGFACE_HUB_CACHE: /data/hf-cache
      TRANSFORMERS_CACHE: /data/hf-cache

      HF_LOCAL_ONLY: "${HF_LOCAL_ONLY:-0}"

    volumes:
      - ./hf-cache:/data/hf-cache